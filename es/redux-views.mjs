const e=[e=>e],t={},n=e=>{const n=e.length;t[n]||(t[n]=[]);const r=t[n].find(([t])=>t.every((t,n)=>e[n]===t));if(r)return r[1];const c=(e=>{const t=(...t)=>e.map(e=>encodeURIComponent(e(...t))).join("/");return t.fns=e,t.idSelector=t,t})(e);return t[n].push([e,c]),c},r=e=>{const t=e.map(e=>e.idSelector).filter(Boolean).sort(),r=[];let c;return t.forEach(e=>{e!==c&&r.push(e),c=e}),0===r.length?null:1===r.length?r[0]:n(r)},c=new Map,o=e=>e?e.map(e=>{const t=c.get(e);if(t)return t;const n=e.dependencies?o(e.dependencies):[e];return c.set(e,n),n}).reduce((e,t)=>(e.push(...t.filter(t=>!t.idSelector&&!e.includes(t))),e),[]):[],s=(t,n,r,c,o)=>{const s=t.length>0?t:e;let u=0;const l=(...e)=>{const t=c(...e),[l,i]=t,a=s.map(t=>t(...e));if(l&&a.every((e,t)=>e===l[t]))return i;u++;const d=o?n(e[0],...a):n(...a);return t[0]=a,t[1]=r&&r(d,i)?i:d};return l.recomputations=()=>u,l.resetRecomputations=()=>u=0,l.dependencies=s,l.resultFunc=n,l},u=(e,t,n,r,c)=>{let o={},u={};const l=s(e,t,n,(...e)=>{const t=r(...e);return o[t]||(o[t]=[,,])},c);l.idSelector=r;const i=e.filter(e=>e.use);return l.use=e=>{let t;if((e=>{u[e]=(u[e]||0)+1})(e),r.fns){const n=e.split("/").map(decodeURIComponent);t=i.map(e=>e.use(n[r.fns.indexOf(e.idSelector)]))}else t=i.map(t=>t.use(e));return()=>{(e=>{u[e]>1?u[e]--:(delete o[e],delete u[e])})(e),t.forEach(e=>e())}},l.clearCache=(e=!0)=>{o={},u={},e&&i.forEach(e=>e.clearCache())},l},l=(e,t,n)=>{const c=r(e);if(c)return u(e,t,n,c);const o=[,,];return s(e,t,n,()=>o)},i=(e,t,n,c)=>{const l=[...e,...o(t)],i=r(l);if(i)return u(l,n,c,i,!!t);const a=[,,];return s(l,n,c,()=>a,!!t)};var a=e=>{const t=Object.keys(e);return l(Object.values(e),(...e)=>{const n={};return e.forEach((e,r)=>n[t[r]]=e),n})},d=e=>{const t=(t,...n)=>e(...n);return t.idSelector=t,t};export{i as createCompilationSelector,d as createIdSelector,l as createSelector,a as createStructuredSelector};
